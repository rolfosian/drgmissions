# Site is now live at https://doublexp.net/

## **Deep Rock Galactic lua scripts for use with [RE-UE4SS lua API](https://github.com/UE4SS-RE/RE-UE4SS/) to fetch current mission and deep dive data for flask**

- To run DRG headless, use command line arg `-nullrhi` when running the game
- Make sure to [skip intro videos](https://www.pcgamingwiki.com/wiki/Deep_Rock_Galactic#Skip_intro_videos) and use `-nosplash` command line arg
- ~~Consider using [SteamCMD](https://developer.valvesoftware.com/wiki/SteamCMD) for even less overhead and easier automation for updates etc~~ - Doesn't work due to DRM
- Unzip UE4SS_Xinput_v2.5.2.zip in Deep Rock Galactic\FSD\Binaries\Win64 - this is also the CWD of the scripts run by the hook.
* [This script will collect all of the missions generated by DRG up until the date set by the target_date variable](https://github.com/rolfosian/drgmissions/blob/main/mods/long_term_mission_data_collector/Scripts/main.lua)
- The socket folder in [/mods/long_term_mission_data_collector/Scripts/x64](https://github.com/rolfosian/drgmissions/blob/main/mods/long_term_mission_data_collector/Scripts/x64) is required in Deep Rock Galactic\FSD\Binaries\Win64 for this script to work
- Deep Rock Galactic\FSD.exe AND Deep Rock Galactic\FSD\Binaries\Win64\FSD-Win64-Shipping.exe AND ALSO Steam ARE ALL required to be run with administrator privileges in order for this script to be able to modify the system clock and run without errors

* [This script will fetch the current DD data and exit the game in short order](https://github.com/rolfosian/drgmissions/blob/main/mods/dds_fetcher/Scripts/main.lua)

## **TODO**
- ~~Contingencies for if the game doesn't terminate gracefully on 'organic' exit~~ Refer to kill process function in [this script](https://github.com/rolfosian/drgmissions/blob/main/DDs_Run.py)
- Contingencies for if the game crashes
- ~~Loop script to actually launch the game and upload DD data to flask host weekly~~ Refer to [this script](https://github.com/rolfosian/drgmissions/blob/main/DDs_Run.py) and its corresponding [.bat](https://github.com/rolfosian/drgmissions/blob/main/Run_DDs.bat) for Task scheduler info. I set a cron to run wakeonlan on my home server at 10:59 Thursday to send magic packets to wake a hardware tertiary machine I built out of old trash. Tested with a Windows 10 virtual machine using `-nullrhi` and it works also but is slow.
- Figure out a solution to reduce required delay between iterations for accurate data to be collected by the 30 minute incrementer
- Figure out how to manipulate wine(?) system clock with hook on linux
- Determine functions for loading into Deep Dive stages and scraping extra data such as Dreadnought types and BET-C? Idk, I don't like the idea of going too deep, it starts to feel like cheating at some point
- Convert Complexity/Length sanitation/finalization to table lookup
